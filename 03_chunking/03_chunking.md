# ğŸ§© Chunking Experiment Summary

## 1. Overview
ì´ë²ˆ ì‹¤í—˜ì€ **RAG íŒŒì´í”„ë¼ì¸ì˜ ë¬¸ì„œ ë¶„í• (Chunking) ì „ëµ**ì„ ìµœì í™”í•˜ê¸° ìœ„í•´  
`chunk_size`ì™€ `overlap`ì˜ ì¡°í•©ì´ ë¬¸ì„œ ë‹¨ìœ„ ë¶„í•  íš¨ìœ¨ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ë¶„ì„í•œ ê²ƒì´ë‹¤.

- **ì…ë ¥ ë°ì´í„°**: `data/raw` í´ë” ë‚´ PDF â†’ PyMuPDFë¡œ í…ìŠ¤íŠ¸ ì¶”ì¶œ â†’ `data/processed` ì €ì¥  
- **ì‹¤í—˜ ëª©ì **:  
  1. Chunk í¬ê¸°(`chunk_size`)ì— ë”°ë¥¸ ë¬¸ì„œ ë¶„í•  íŒ¨í„´ ë³€í™” ê´€ì°°  
  2. Overlap(`overlap`) í¬ê¸°ì— ë”°ë¥¸ ë¬¸ë§¥ ìœ ì§€ìœ¨ ë° ë¶„í•  íš¨ìœ¨ ë¹„êµ  
  3. ìµœì ì˜ trade-off ì¡°í•© íƒìƒ‰  

---

## 2. Experiment Setup

| ì‹¤í—˜ | Chunk Sizes | Overlaps | ëª©ì  |
|------|--------------|-----------|------|
| **Exp 1** | 300, 500, 800, 1000 | 0, 50, 100, 200 | ê¸°ë³¸ ë²”ìœ„ í…ŒìŠ¤íŠ¸ |
| **Exp 2** | 256, 384, 512, 768, 1024 | 0, 32, 64, 96, 128 | ì„¸ë°€ ì¡°ì • í…ŒìŠ¤íŠ¸ |

- **ì¸¡ì • ì§€í‘œ**
  - `chunk_count`: ìƒì„±ëœ ì²­í¬ ê°œìˆ˜  
  - `avg_len`: ì²­í¬ì˜ í‰ê·  ê¸¸ì´  
  - `overlap_ratio`: ì¸ì ‘ ì²­í¬ ê°„ ì¤‘ë³µ ë¹„ìœ¨  

---

## 3. Key Findings

| í•­ëª© | Exp1 (300â€“1000) | Exp2 (256â€“1024) | í•´ì„ |
|------|------------------|-----------------|------|
| **Chunk Count ë³€í™”** | Chunk Size ì¦ê°€ ì‹œ ê¸‰ê° â†’ 800 ì´ìƒ ì™„ë§Œ | ë™ì¼ ê²½í–¥ | íš¨ìœ¨ êµ¬ê°„ ì¡´ì¬ |
| **Overlap íš¨ê³¼** | Overlapì´ ì¦ê°€í• ìˆ˜ë¡ ì™„ë§Œí•œ ì¦ê°€ | ë™ì¼ ê²½í–¥ | 100 ì´ìƒ íš¨ê³¼ ë¯¸ë¯¸ |
| **íš¨ìœ¨ êµ¬ê°„** | 500~800 / 50~100 | 512~768 / 32~64 | ê±°ì˜ ì¼ì¹˜ |
| **ìµœì  êµ¬ê°„** | ì¤‘ê°„ í¬ê¸° + ì¤‘ê°„ ì˜¤ë²„ë© | ì¤‘ê°„ í¬ê¸° + ì¤‘ê°„ ì˜¤ë²„ë© | âœ… ê³µí†µ ê²°ë¡  |

---

## 4. Visualization Summary

> (ì•„ë˜ ê·¸ë˜í”„ë“¤ì€ ì‹¤í—˜ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒì„±ë¨)

1. **Chunk Size vs Chunk Count**
   - ë‘ ì‹¤í—˜ ëª¨ë‘ chunk_sizeê°€ ì¦ê°€í• ìˆ˜ë¡ chunk_count ê¸‰ê°  
   - 800 ì´ìƒì—ì„œëŠ” ê°ì†Œìœ¨ì´ ì™„ë§Œí•´ì§€ë©° íš¨ìœ¨ êµ¬ê°„ ë„ë‹¬  

2. **Overlap vs Chunk Count**
   - overlapì´ 0 â†’ 100(ë˜ëŠ” 128)ìœ¼ë¡œ ì¦ê°€í• ìˆ˜ë¡ chunk_countê°€ ì™„ë§Œí•˜ê²Œ ì¦ê°€  
   - ë¬¸ë§¥ ìœ ì§€ìœ¨ í–¥ìƒ ëŒ€ë¹„ í† í° ë‚­ë¹„ ì¦ê°€ë¡œ íš¨ìœ¨ ì €í•˜  

3. **Exp1 vs Exp2 ë¹„êµ**
   - Exp2ê°€ ë” ì„¸ë°€í•œ stepìœ¼ë¡œ êµ¬ì„±ë˜ì–´ íŒŒë¼ë¯¸í„° íŠœë‹ì— ìœ ë¦¬  
   - ì‹¤í—˜ ê²½í–¥ì€ ë™ì¼í•˜ë©°, íš¨ìœ¨ ë²”ìœ„ê°€ ì•ˆì •ì ìœ¼ë¡œ ì¼ì¹˜  

---

## 5. Interpretation

### 1ï¸âƒ£ ì‘ì€ Chunk (â‰¤300)
- ë¬¸ë§¥ ë‹¨ì ˆ ì‹¬í•¨  
- embedding ë¹„ìš© ê³¼ë„  
- ê²€ìƒ‰ íš¨ìœ¨ ì €í•˜  
â†’ âŒ ë¹„íš¨ìœ¨ì 

### 2ï¸âƒ£ í° Chunk (â‰¥1000)
- ë¬¸ë§¥ ìœ ì§€ ì¢‹ìœ¼ë‚˜  
- í† í° ë‚­ë¹„ ë° ì¬ì‚¬ìš©ì„± ì €í•˜  
â†’ âš ï¸ ë¬¸ì„œ êµ¬ì¡°ì— ë”°ë¼ ë¹„íš¨ìœ¨ ê°€ëŠ¥

### 3ï¸âƒ£ ì¤‘ê°„ êµ¬ê°„ (512~768)
- ë¬¸ë§¥ ìœ ì§€ìœ¨ê³¼ íš¨ìœ¨ ê°„ **ê°€ì¥ ì•ˆì •ì ì¸ ê· í˜•ì **  
- ì²­í¬ ê°„ ì¤‘ë³µì´ ìì—°ìŠ¤ëŸ½ê³  retrieval precision í–¥ìƒ  
â†’ âœ… **RAG ì‹œìŠ¤í…œì˜ ê¸°ë³¸ê°’ìœ¼ë¡œ ì í•©**

---

## 6. Conclusion

> **ê²°ë¡ ì ìœ¼ë¡œ**,  
> RAG íŒŒì´í”„ë¼ì¸ì—ì„œ ê°€ì¥ ì í•©í•œ íŒŒë¼ë¯¸í„° ì¡°í•©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:
>
> ```
> Chunk Size: 512 ~ 768  
> Overlap: 32 ~ 64
> ```
>
> ì´ ì¡°í•©ì€ ë¬¸ë§¥ ì¼ê´€ì„±ê³¼ íš¨ìœ¨ì„± ì‚¬ì´ì˜ ìµœì  trade-offë¥¼ ì œê³µí•˜ë©°,  
> ë‹¤ì–‘í•œ ë¬¸ì„œ êµ¬ì¡°ì—ì„œë„ ì¼ë°˜í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.

---

## 7. Next Steps
- **Embedding ë ˆë²¨ í‰ê°€ (`embedding_stats.md`)**  
  â†’ ë™ì¼ ë°ì´í„°ë¡œ cosine similarity, retrieval precision ê²€ì¦ ì˜ˆì •  
- **ë¬¸ì„œ êµ¬ì¡° íŒ¨í„´(`structure_patterns.md`)ê³¼ í†µí•© ë¶„ì„**  
  â†’ ë¬¸ë‹¨ ê¸¸ì´ ë¶„í¬, ì„¹ì…˜ íŒ¨í„´ ê¸°ë°˜ adaptive chunking ì‹¤í—˜  
- **ì¶”ê°€ ì‹¤í—˜ ì œì•ˆ**  
  - Sentence-level adaptive chunking  
  - Semantic overlap ê¸°ë°˜ sliding window ì „ëµ ë¹„êµ  
  - Chunk redundancy ì œê±° í›„ embedding quality í‰ê°€  

---

## 8. Version Info
- Author: ë°•ë³‘í˜„  
- Last Update: 2025-11-12  
- Related Files:
  - `03_chunking_analysis.ipynb`
  - `chunk_experiment.py`
  - `data/interim/chunk_exp_*.csv`